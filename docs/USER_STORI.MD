# USER STORIES - ·ª®ng D·ª•ng Dinh D∆∞·ª°ng Th√¥ng Minh

## 1. PH√ÇN H·ªÜ ƒêƒÇNG NH·∫¨P & H·ªí S∆† (AUTH & PROFILE)

### US-001: ƒêƒÉng k√Ω t√†i kho·∫£n qua OAuth
**As a** ng∆∞·ªùi d√πng m·ªõi  
**I want** ƒëƒÉng k√Ω t√†i kho·∫£n b·∫±ng Google ho·∫∑c Apple  
**So that** t√¥i c√≥ th·ªÉ ƒëƒÉng nh·∫≠p nhanh ch√≥ng m√† kh√¥ng c·∫ßn t·∫°o m·∫≠t kh·∫©u m·ªõi

**Acceptance Criteria:**
- [ ] Hi·ªÉn th·ªã n√∫t "Sign in with Google"
- [ ] Sau khi OAuth th√†nh c√¥ng, t·ª± ƒë·ªông l·∫•y fullName, email, avatar t·ª´ provider
- [ ] T·∫°o t√†i kho·∫£n m·ªõi trong database n·∫øu email ch∆∞a t·ªìn t·∫°i
- [ ] Chuy·ªÉn h∆∞·ªõng ƒë·∫øn m√†n h√¨nh onboarding n·∫øu l√† l·∫ßn ƒë·∫ßu ƒëƒÉng k√Ω
- [ ] Chuy·ªÉn h∆∞·ªõng ƒë·∫øn Home n·∫øu ƒë√£ c√≥ h·ªì s∆° ƒë·∫ßy ƒë·ªß

**Priority:** High  
**Story Points:** 5

---

### US-002: ƒêƒÉng k√Ω t√†i kho·∫£n th√¥ng th∆∞·ªùng
**As a** ng∆∞·ªùi d√πng m·ªõi  
**I want** ƒëƒÉng k√Ω t√†i kho·∫£n b·∫±ng email v√† m·∫≠t kh·∫©u  
**So that** t√¥i c√≥ th·ªÉ t·∫°o t√†i kho·∫£n m√† kh√¥ng c·∫ßn d√πng Google/Apple

**Acceptance Criteria:**
- [ ] Form ƒëƒÉng k√Ω c√≥ c√°c tr∆∞·ªùng: Email, Password, Confirm Password, H·ªç v√† t√™n
- [ ] Validate email format
- [ ] Password ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±, bao g·ªìm ch·ªØ hoa, ch·ªØ th∆∞·ªùng v√† s·ªë
- [ ] Confirm Password ph·∫£i kh·ªõp v·ªõi Password
- [ ] Hi·ªÉn th·ªã l·ªói n·∫øu email ƒë√£ t·ªìn t·∫°i
- [ ] G·ª≠i email x√°c nh·∫≠n (optional)
- [ ] Chuy·ªÉn h∆∞·ªõng ƒë·∫øn onboarding sau khi ƒëƒÉng k√Ω th√†nh c√¥ng

**Priority:** High  
**Story Points:** 5

---

### US-003: ƒêƒÉng nh·∫≠p
**As a** ng∆∞·ªùi d√πng ƒë√£ c√≥ t√†i kho·∫£n  
**I want** ƒëƒÉng nh·∫≠p v√†o ·ª©ng d·ª•ng  
**So that** t√¥i c√≥ th·ªÉ truy c·∫≠p d·ªØ li·ªáu c√° nh√¢n c·ªßa m√¨nh

**Acceptance Criteria:**
- [ ] H·ªó tr·ª£ ƒëƒÉng nh·∫≠p b·∫±ng Email/Password
- [ ] H·ªó tr·ª£ ƒëƒÉng nh·∫≠p b·∫±ng Google OAuth
- [ ] H·ªó tr·ª£ ƒëƒÉng nh·∫≠p b·∫±ng Apple Sign In
- [ ] Hi·ªÉn th·ªã l·ªói n·∫øu th√¥ng tin ƒëƒÉng nh·∫≠p sai
- [ ] L∆∞u session/token ƒë·ªÉ t·ª± ƒë·ªông ƒëƒÉng nh·∫≠p l·∫ßn sau
- [ ] Chuy·ªÉn ƒë·∫øn Home n·∫øu ƒë√£ c√≥ profile ƒë·∫ßy ƒë·ªß
- [ ] Chuy·ªÉn ƒë·∫øn onboarding n·∫øu ch∆∞a ho√†n th√†nh thi·∫øt l·∫≠p

**Priority:** High  
**Story Points:** 3

---

### US-004: Thi·∫øt l·∫≠p ng√¥n ng·ªØ hi·ªÉn th·ªã
**As a** ng∆∞·ªùi d√πng m·ªõi  
**I want** ch·ªçn ng√¥n ng·ªØ hi·ªÉn th·ªã cho ·ª©ng d·ª•ng  
**So that** t√¥i c√≥ th·ªÉ s·ª≠ d·ª•ng ·ª©ng d·ª•ng b·∫±ng ng√¥n ng·ªØ m√¨nh quen thu·ªôc

**Acceptance Criteria:**
- [ ] Hi·ªÉn th·ªã danh s√°ch ng√¥n ng·ªØ: Ti·∫øng Vi·ªát, Ti·∫øng Anh, Ti·∫øng Nh·∫≠t, v.v.
- [ ] Cho ph√©p ch·ªçn 1 ng√¥n ng·ªØ
- [ ] L∆∞u l·ª±a ch·ªçn v√†o UserProfile
- [ ] To√†n b·ªô UI chuy·ªÉn sang ng√¥n ng·ªØ ƒë√£ ch·ªçn

**Priority:** Medium  
**Story Points:** 3

---

### US-005: Thi·∫øt l·∫≠p s·ªü th√≠ch ƒÉn u·ªëng
**As a** ng∆∞·ªùi d√πng m·ªõi  
**I want** ch·ªçn c√°c s·ªü th√≠ch ƒÉn u·ªëng c·ªßa m√¨nh  
**So that** ·ª©ng d·ª•ng c√≥ th·ªÉ g·ª£i √Ω m√≥n ƒÉn ph√π h·ª£p v·ªõi t√¥i

**Acceptance Criteria:**
- [ ] Hi·ªÉn th·ªã danh s√°ch tags: Vegan, Halal, Asian Food, Mediterranean, Low-Carb, v.v.
- [ ] Cho ph√©p ch·ªçn nhi·ªÅu tags
- [ ] L∆∞u danh s√°ch tags ƒë√£ ch·ªçn v√†o UserProfile
- [ ] Tags ƒë∆∞·ª£c d√πng cho t√≠nh nƒÉng Food Search v√† Suggestion

**Priority:** Medium  
**Story Points:** 3

---

### US-006: Thi·∫øt l·∫≠p th√¥ng tin d·ªã ·ª©ng
**As a** ng∆∞·ªùi d√πng c√≥ d·ªã ·ª©ng th·ª±c ph·∫©m  
**I want** khai b√°o c√°c lo·∫°i th·ª±c ph·∫©m t√¥i b·ªã d·ªã ·ª©ng v√† m·ª©c ƒë·ªô  
**So that** ·ª©ng d·ª•ng c√≥ th·ªÉ c·∫£nh b√°o khi t√¥i ƒÉn m√≥n c√≥ nguy c∆° g√¢y d·ªã ·ª©ng

**Acceptance Criteria:**
- [ ] Hi·ªÉn th·ªã danh s√°ch lo·∫°i d·ªã ·ª©ng: H·∫£i s·∫£n, ƒê·∫≠u ph·ªông, Gluten, S·ªØa, Tr·ª©ng, v.v.
- [ ] Cho ph√©p ch·ªçn nhi·ªÅu lo·∫°i d·ªã ·ª©ng
- [ ] V·ªõi m·ªói lo·∫°i, ch·ªçn m·ª©c ƒë·ªô: Mild (Nh·∫π), Moderate (Trung b√¨nh), Severe (Nghi√™m tr·ªçng)
- [ ] L∆∞u th√¥ng tin v√†o b·∫£ng Allergen
- [ ] D·ªØ li·ªáu ƒë∆∞·ª£c d√πng cho Safety Check trong Food Scanner v√† Menu Translator

**Priority:** High  
**Story Points:** 5

---

### US-007: Thi·∫øt l·∫≠p ch·ªâ s·ªë s·ª©c kh·ªèe v√† m·ª•c ti√™u
**As a** ng∆∞·ªùi d√πng m·ªõi  
**I want** nh·∫≠p th√¥ng tin c∆° th·ªÉ v√† ch·ªçn m·ª•c ti√™u s·ª©c kh·ªèe  
**So that** ·ª©ng d·ª•ng c√≥ th·ªÉ t√≠nh to√°n v√† ƒë·ªÅ xu·∫•t l∆∞·ª£ng Calories/Macro ph√π h·ª£p

**Acceptance Criteria:**
- [ ] Form nh·∫≠p: C√¢n n·∫∑ng (kg), Chi·ªÅu cao (cm), Gi·ªõi t√≠nh, Tu·ªïi
- [ ] Ch·ªçn t√¨nh tr·∫°ng s·ª©c kh·ªèe (c√≥ th·ªÉ ch·ªçn nhi·ªÅu): Diabetes, High BP, Cholesterol, None
- [ ] Ch·ªçn m·ª•c ti√™u: Lose weight, Maintain, Gain
- [ ] H·ªá th·ªëng t·ª± ƒë·ªông t√≠nh BMI
- [ ] H·ªá th·ªëng t·ª± ƒë·ªông t√≠nh TDEE (Total Daily Energy Expenditure)
- [ ] ƒê·ªÅ xu·∫•t Calories m·ª•c ti√™u h·∫±ng ng√†y
- [ ] ƒê·ªÅ xu·∫•t Macro (Protein/Carbs/Fat) m·ª•c ti√™u
- [ ] L∆∞u v√†o b·∫£ng HealthProfile
- [ ] Hi·ªÉn th·ªã k·∫øt qu·∫£ tr∆∞·ªõc khi ho√†n t·∫•t

**Priority:** High  
**Story Points:** 8

---

### US-008: Ch·ªânh s·ª≠a h·ªì s∆° c√° nh√¢n
**As a** ng∆∞·ªùi d√πng  
**I want** ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n, s·ªü th√≠ch v√† m·ª•c ti√™u  
**So that** t√¥i c√≥ th·ªÉ c·∫≠p nh·∫≠t khi c√≥ thay ƒë·ªïi

**Acceptance Criteria:**
- [ ] Truy c·∫≠p ƒë∆∞·ª£c t·ª´ Profile/Settings
- [ ] Cho ph√©p ch·ªânh s·ª≠a: H·ªç t√™n, Avatar
- [ ] Cho ph√©p thay ƒë·ªïi s·ªü th√≠ch ƒÉn u·ªëng
- [ ] Cho ph√©p c·∫≠p nh·∫≠t th√¥ng tin d·ªã ·ª©ng
- [ ] Cho ph√©p c·∫≠p nh·∫≠t ch·ªâ s·ªë s·ª©c kh·ªèe v√† m·ª•c ti√™u
- [ ] H·ªá th·ªëng t·ª± ƒë·ªông t√≠nh l·∫°i BMI, TDEE khi thay ƒë·ªïi
- [ ] L∆∞u changes v√†o database

**Priority:** Medium  
**Story Points:** 5

---

## 2. PH√ÇN H·ªÜ TRANG CH·ª¶ & T·ªîNG QUAN (HOME SUMMARY)

### US-009: Xem dashboard t·ªïng quan dinh d∆∞·ª°ng
**As a** ng∆∞·ªùi d√πng  
**I want** xem t·ªïng quan v·ªÅ l∆∞·ª£ng Calories v√† Macro ƒë√£ ti√™u th·ª• trong ng√†y  
**So that** t√¥i c√≥ th·ªÉ theo d√µi ti·∫øn tr√¨nh ƒë·∫°t m·ª•c ti√™u

**Acceptance Criteria:**
- [ ] Hi·ªÉn th·ªã bi·ªÉu ƒë·ªì tr√≤n ho·∫∑c thanh: Calories ƒë√£ ti√™u th·ª• / Calories m·ª•c ti√™u
- [ ] Hi·ªÉn th·ªã 3 thanh Macro ri√™ng bi·ªát: Protein, Carbs, Fat
- [ ] M·ªói thanh cho th·∫•y: ƒê√£ ti√™u th·ª• / M·ª•c ti√™u
- [ ] Hi·ªÉn th·ªã % ho√†n th√†nh
- [ ] D·ªØ li·ªáu ƒë∆∞·ª£c t√≠nh t·ª´ NutritionLog trong ng√†y hi·ªán t·∫°i
- [ ] Refresh khi c√≥ log m·ªõi ƒë∆∞·ª£c th√™m v√†o

**Priority:** High  
**Story Points:** 5

---

### US-010: Nh·∫≠n ƒë√°nh gi√° nhanh v·ªÅ dinh d∆∞·ª°ng
**As a** ng∆∞·ªùi d√πng  
**I want** nh·∫≠n th√¥ng b√°o v·ªÅ ch·∫•t dinh d∆∞·ª°ng c√≤n thi·∫øu trong ng√†y  
**So that** t√¥i bi·∫øt c·∫ßn b·ªï sung g√¨

**Acceptance Criteria:**
- [ ] H·ªá th·ªëng t·ª± ƒë·ªông ph√¢n t√≠ch Nutrition Log
- [ ] T√≠nh to√°n kho·∫£ng c√°ch gi·ªØa Current v√† Goal
- [ ] Hi·ªÉn th·ªã th√¥ng b√°o: "B·∫°n ƒëang thi·∫øu Xg Protein h√¥m nay"
- [ ] ∆Øu ti√™n hi·ªÉn th·ªã Protein tr∆∞·ªõc ti√™n
- [ ] N·∫øu d∆∞ Calories ho·∫∑c Macro, c≈©ng c·∫£nh b√°o

**Priority:** Medium  
**Story Points:** 5

---

### US-011: Nh·∫≠n g·ª£i √Ω m√≥n ƒÉn th√¥ng minh t·ª´ AI
**As a** ng∆∞·ªùi d√πng thi·∫øu ch·∫•t dinh d∆∞·ª°ng  
**I want** nh·∫≠n g·ª£i √Ω m√≥n ƒÉn ƒë·ªÉ l·∫•p ƒë·∫ßy kho·∫£ng tr·ªëng  
**So that** t√¥i c√≥ th·ªÉ ƒë·∫°t m·ª•c ti√™u m√† kh√¥ng ƒÉn th·ª´a Calories

**Acceptance Criteria:**
- [ ] T√≠ch h·ª£p Chatbot/LLM (v√≠ d·ª•: OpenAI, Gemini)
- [ ] Input: Current nutrition status, Goal, Allergens, Preferences
- [ ] Output: G·ª£i √Ω c·ª• th·ªÉ 1-3 m√≥n ƒÉn
- [ ] V√≠ d·ª•: "ƒê·ªÉ ƒë·ªß protein m√† kh√¥ng b·ªã d∆∞ Fat, b·∫°n n√™n ƒÉn th√™m ·ª©c g√† lu·ªôc ho·∫∑c u·ªëng 1 scoop whey"
- [ ] Hi·ªÉn th·ªã g·ª£i √Ω trong Home Summary
- [ ] Cho ph√©p refresh ƒë·ªÉ l·∫•y g·ª£i √Ω kh√°c

**Priority:** Medium  
**Story Points:** 8

---

## 3. PH√ÇN H·ªÜ QU√âT M√ìN ƒÇN (AI FOOD SCANNER)

### US-012: Qu√©t v√† ph√¢n t√≠ch m√≥n ƒÉn
**As a** ng∆∞·ªùi d√πng  
**I want** ch·ª•p ·∫£nh m√≥n ƒÉn ƒë·ªÉ nh·∫≠n th√¥ng tin dinh d∆∞·ª°ng  
**So that** t√¥i c√≥ th·ªÉ log nhanh ch√≥ng m√† kh√¥ng c·∫ßn tra c·ª©u th·ªß c√¥ng

**Acceptance Criteria:**
- [ ] M·ªü camera ho·∫∑c ch·ªçn ·∫£nh t·ª´ th∆∞ vi·ªán
- [ ] G·ª≠i ·∫£nh ƒë·∫øn AI service (v√≠ d·ª•: Google Vision, OpenAI GPT-4 Vision)
- [ ] Nh·∫≠n v·ªÅ: T√™n m√≥n ƒÉn, Ingredients, Calories, Protein, Carbs, Fat
- [ ] Hi·ªÉn th·ªã k·∫øt qu·∫£ trong < 5 gi√¢y
- [ ] Cho ph√©p ch·ªânh s·ª≠a th√¥ng tin n·∫øu sai
- [ ] L∆∞u v√†o NutritionLog khi confirm

**Priority:** High  
**Story Points:** 13

---

### US-013: Ki·ªÉm tra an to√†n th·ª±c ph·∫©m
**As a** ng∆∞·ªùi d√πng c√≥ d·ªã ·ª©ng ho·∫∑c v·∫•n ƒë·ªÅ s·ª©c kh·ªèe  
**I want** ki·ªÉm tra xem m√≥n ƒÉn c√≥ an to√†n cho t√¥i kh√¥ng  
**So that** t√¥i tr√°nh ƒë∆∞·ª£c c√°c m√≥n c√≥ nguy c∆° g√¢y h·∫°i

**Acceptance Criteria:**
- [ ] So s√°nh Ingredients v·ªõi Allergens c·ªßa user
- [ ] So s√°nh v·ªõi Health Conditions (v√≠ d·ª•: ƒë∆∞·ªùng cao v·ªõi Diabetes)
- [ ] Hi·ªÉn th·ªã tr·∫°ng th√°i:
  - ‚úÖ Safe (An to√†n) - Kh√¥ng c√≥ th√†nh ph·∫ßn nguy hi·ªÉm
  - ‚ö†Ô∏è Warning (C·∫£nh b√°o) - C√≥ th√†nh ph·∫ßn c·∫ßn l∆∞u √Ω, k√®m l√Ω do
  - ‚õî Danger (Nguy hi·ªÉm) - Ch·ª©a allergen ·ªü m·ª©c Severe
- [ ] Hi·ªÉn th·ªã l√Ω do c·ª• th·ªÉ: "Ch·ª©a ƒë·∫≠u ph·ªông", "ƒê∆∞·ªùng cao - kh√¥ng ph√π h·ª£p v·ªõi ti·ªÉu ƒë∆∞·ªùng"
- [ ] ∆Øu ti√™n ƒë·ªô nh·∫°y (th√† b√°o nh·∫ßm c√≤n h∆°n b·ªè s√≥t)

**Priority:** High  
**Story Points:** 8

---

### US-014: L∆∞u m√≥n y√™u th√≠ch
**As a** ng∆∞·ªùi d√πng  
**I want** l∆∞u c√°c m√≥n ƒÉn t√¥i hay ƒÉn v√†o danh s√°ch y√™u th√≠ch  
**So that** l·∫ßn sau t√¥i c√≥ th·ªÉ log nhanh m√† kh√¥ng c·∫ßn scan l·∫°i

**Acceptance Criteria:**
- [ ] N√∫t "Save to Favorites" sau khi scan
- [ ] L∆∞u v√†o b·∫£ng FavoriteFood
- [ ] Hi·ªÉn th·ªã danh s√°ch Favorites trong Profile ho·∫∑c tab ri√™ng
- [ ] Cho ph√©p log nhanh t·ª´ Favorites (1 tap)
- [ ] Cho ph√©p x√≥a kh·ªèi Favorites

**Priority:** Medium  
**Story Points:** 3

---

## 4. PH√ÇN H·ªÜ D·ªäCH & PH√ÇN T√çCH MENU (SMART MENU TRANSLATOR)

### US-015: Qu√©t v√† nh·∫≠n di·ªán c·∫•u tr√∫c menu
**As a** ng∆∞·ªùi d√πng ·ªü n∆∞·ªõc ngo√†i  
**I want** ch·ª•p ·∫£nh menu nh√† h√†ng ƒë·ªÉ nh·∫≠n di·ªán c·∫•u tr√∫c  
**So that** t√¥i c√≥ th·ªÉ hi·ªÉu menu ƒë∆∞·ª£c chia th√†nh nh·ªØng ph·∫ßn n√†o

**Acceptance Criteria:**
- [ ] Ch·ª•p ho·∫∑c upload ·∫£nh menu
- [ ] D√πng OCR (v√≠ d·ª•: Google Cloud Vision, Tesseract) ƒë·ªÉ ƒë·ªçc text
- [ ] Nh·∫≠n di·ªán c·∫•u tr√∫c: Appetizer, Main Course, Dessert, Drinks
- [ ] Decode sub-menu (v√≠ d·ª•: menu g·∫≠p nhi·ªÅu trang)
- [ ] T·ª± ƒë·ªông l∆∞u Location Name v√† GPS coordinates khi scan
- [ ] L∆∞u v√†o b·∫£ng Menu v√† MenuItem

**Priority:** High  
**Story Points:** 13

---

### US-016: D·ªãch menu sang ng√¥n ng·ªØ ng∆∞·ªùi d√πng
**As a** ng∆∞·ªùi d√πng  
**I want** d·ªãch t√™n m√≥n v√† m√¥ t·∫£ sang ng√¥n ng·ªØ c·ªßa t√¥i  
**So that** t√¥i hi·ªÉu ƒë∆∞·ª£c m√≥n ƒÉn l√† g√¨

**Acceptance Criteria:**
- [ ] T·ª± ƒë·ªông nh·∫≠n di·ªán ng√¥n ng·ªØ g·ªëc c·ªßa menu
- [ ] D·ªãch sang ng√¥n ng·ªØ ƒë√£ c√†i ƒë·∫∑t trong UserProfile
- [ ] S·ª≠ d·ª•ng Translation API (Google Translate, DeepL)
- [ ] Hi·ªÉn th·ªã c·∫£ b·∫£n g·ªëc v√† b·∫£n d·ªãch
- [ ] Cho ph√©p ch·ªçn ng√¥n ng·ªØ kh√°c n·∫øu mu·ªën

**Priority:** High  
**Story Points:** 5

---

### US-017: Quy ƒë·ªïi ti·ªÅn t·ªá tr√™n menu
**As a** ng∆∞·ªùi d√πng  
**I want** xem gi√° m√≥n ƒÉn ƒë∆∞·ª£c quy ƒë·ªïi sang ti·ªÅn t·ªá c·ªßa t√¥i  
**So that** t√¥i bi·∫øt m√≥n ƒÉn ƒë·∫Øt hay r·∫ª so v·ªõi ng√¢n s√°ch

**Acceptance Criteria:**
- [ ] T·ª± ƒë·ªông nh·∫≠n di·ªán lo·∫°i ti·ªÅn t·ªá tr√™n menu (JPY, KRW, THB, USD, v.v.)
- [ ] L·∫•y t·ª∑ gi√° real-time ho·∫∑c cached (c·∫≠p nh·∫≠t √≠t nh·∫•t 1 l·∫ßn/ng√†y)
- [ ] Quy ƒë·ªïi sang ti·ªÅn t·ªá c·ªßa user (v√≠ d·ª•: VND)
- [ ] Hi·ªÉn th·ªã c·∫£ gi√° g·ªëc v√† gi√° quy ƒë·ªïi
- [ ] Cho ph√©p ch·ªçn ti·ªÅn t·ªá ƒë√≠ch kh√°c

**Priority:** Medium  
**Story Points:** 5

---

### US-018: ƒê√°nh gi√° an to√†n menu
**As a** ng∆∞·ªùi d√πng c√≥ d·ªã ·ª©ng  
**I want** xem nh·ªØng m√≥n n√†o tr√™n menu c√≥ nguy c∆° g√¢y d·ªã ·ª©ng  
**So that** t√¥i tr√°nh ƒë∆∞·ª£c c√°c m√≥n nguy hi·ªÉm

**Acceptance Criteria:**
- [ ] Qu√©t to√†n b·ªô menu v√† so s√°nh ingredients v·ªõi Allergens
- [ ] Highlight/ƒê√°nh d·∫•u c√°c m√≥n c√≥ c·∫£nh b√°o
- [ ] Hi·ªÉn th·ªã icon c·∫£nh b√°o: ‚ö†Ô∏è ho·∫∑c ‚õî
- [ ] Khi tap v√†o m√≥n, hi·ªÉn th·ªã l√Ω do c·∫£nh b√°o
- [ ] H·ªó tr·ª£ AR overlay (optional) ƒë·ªÉ highlight tr·ª±c ti·∫øp tr√™n camera

**Priority:** High  
**Story Points:** 8

---

### US-019: G√°n th·∫ª cho m√≥n ƒÉn tr√™n menu
**As a** ng∆∞·ªùi d√πng  
**I want** xem c√°c m√≥n ƒë∆∞·ª£c g·∫Øn th·∫ª nh∆∞ Best Seller, Spicy, Chef's Choice  
**So that** t√¥i c√≥ th·ªÉ ch·ªçn m√≥n ph√π h·ª£p v·ªõi s·ªü th√≠ch

**Acceptance Criteria:**
- [ ] Nh·∫≠n di·ªán icon ƒë·∫∑c bi·ªát tr√™n menu (‚≠ê, üå∂Ô∏è, üë®‚Äçüç≥)
- [ ] T·ª± ƒë·ªông g√°n tag: Best Seller, Spicy, Chef's Choice
- [ ] Hi·ªÉn th·ªã tag tr√™n danh s√°ch m√≥n
- [ ] Cho ph√©p filter theo tag

**Priority:** Low  
**Story Points:** 5

---

## 5. PH√ÇN H·ªÜ T√åM KI·∫æM M√ìN ƒÇN (SMART FOOD SEARCH)

### US-020: T√¨m ki·∫øm qu√°n ƒÉn theo v·ªã tr√≠
**As a** ng∆∞·ªùi d√πng  
**I want** t√¨m qu√°n ƒÉn g·∫ßn t√¥i  
**So that** t√¥i c√≥ th·ªÉ t√¨m ƒë∆∞·ª£c m√≥n ƒÉn ph√π h·ª£p trong khu v·ª±c

**Acceptance Criteria:**
- [ ] M·∫∑c ƒë·ªãnh d√πng GPS ƒë·ªÉ l·∫•y v·ªã tr√≠ hi·ªán t·∫°i
- [ ] Cho ph√©p ch·ªçn v·ªã tr√≠ kh√°c qua Google Place API
- [ ] Ch·ªçn b√°n k√≠nh: 500m, 1km, 5km, 10km
- [ ] Hi·ªÉn th·ªã map v·ªõi markers c·ªßa c√°c qu√°n
- [ ] Hi·ªÉn th√≠ danh s√°ch k·∫øt qu·∫£

**Priority:** High  
**Story Points:** 8

---

### US-021: L·ªçc k·∫øt qu·∫£ theo ng√¢n s√°ch v√† th·ªùi gian
**As a** ng∆∞·ªùi d√πng  
**I want** l·ªçc qu√°n ƒÉn theo ng√¢n s√°ch v√† th·ªùi gian ƒÉn  
**So that** t√¥i t√¨m ƒë∆∞·ª£c qu√°n ph√π h·ª£p v·ªõi t√∫i ti·ªÅn v√† b·ªØa ƒÉn

**Acceptance Criteria:**
- [ ] Input ng√¢n s√°ch (gi√°/ng∆∞·ªùi): < 50k, 50k-100k, 100k-200k, > 200k
- [ ] Ch·ªçn th·ªùi gian: S√°ng, Tr∆∞a, T·ªëi, ƒÇn nh·∫π
- [ ] Ch·ªçn s·ªü th√≠ch: D·ª±a tr√™n Profile ho·∫∑c ch·ªçn nhanh
- [ ] Filter k·∫øt qu·∫£ theo c√°c ti√™u ch√≠
- [ ] Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng k·∫øt qu·∫£

**Priority:** Medium  
**Story Points:** 5

---

### US-022: Xem g·ª£i √Ω m√≥n ph√π h·ª£p v·ªõi m·ª•c ti√™u s·ª©c kh·ªèe
**As a** ng∆∞·ªùi d√πng  
**I want** xem c√°c m√≥n ƒë∆∞·ª£c x·∫øp h·∫°ng theo ƒë·ªô ph√π h·ª£p v·ªõi m·ª•c ti√™u c·ªßa t√¥i  
**So that** t√¥i ch·ªçn ƒë∆∞·ª£c m√≥n v·ª´a ngon v·ª´a ƒë·∫°t goal

**Acceptance Criteria:**
- [ ] T√≠nh Matching Score gi·ªØa m√≥n ƒÉn v√† Health Goal
- [ ] C√°c y·∫øu t·ªë: Calories, Protein, Carbs, Fat, Allergens
- [ ] S·∫Øp x·∫øp k·∫øt qu·∫£ theo score cao -> th·∫•p
- [ ] Hi·ªÉn th·ªã badge: "Highly Recommended", "Good Match", "Fair"
- [ ] Hi·ªÉn th·ªã l√Ω do: "High Protein - Low Fat", "Fits your calorie budget"

**Priority:** Medium  
**Story Points:** 8

---

### US-023: Xem chi ti·∫øt qu√°n v√† m√≥n g·ª£i √Ω
**As a** ng∆∞·ªùi d√πng  
**I want** xem th√¥ng tin chi ti·∫øt qu√°n v√† m√≥n g·ª£i √Ω  
**So that** t√¥i c√≥ ƒë·ªß th√¥ng tin ƒë·ªÉ quy·∫øt ƒë·ªãnh

**Acceptance Criteria:**
- [ ] Hi·ªÉn th·ªã: T√™n qu√°n, ƒê·ªãa ch·ªâ, Kho·∫£ng c√°ch
- [ ] Hi·ªÉn th·ªã m√≥n g·ª£i √Ω (1-3 m√≥n ph√π h·ª£p nh·∫•t)
- [ ] Gi√° ∆∞·ªõc t√≠nh/m√≥n
- [ ] ƒê√°nh gi√° (rating) n·∫øu c√≥
- [ ] N√∫t "Get Directions" m·ªü Google Maps
- [ ] N√∫t "Log Food" ƒë·ªÉ nhanh ch√≥ng log m√≥n v√†o Nutrition Log

**Priority:** Medium  
**Story Points:** 5

---

## 6. PH√ÇN H·ªÜ H·ªÜ TH·ªêNG C·∫¢NH B√ÅO & G·ª¢I √ù TH√îNG MINH

### US-024: Nh·∫≠n c·∫£nh b√°o thi·∫øu Protein
**As a** ng∆∞·ªùi d√πng  
**I want** nh·∫≠n th√¥ng b√°o khi thi·∫øu Protein trong ng√†y  
**So that** t√¥i k·ªãp b·ªï sung tr∆∞·ªõc khi k·∫øt th√∫c ng√†y

**Acceptance Criteria:**
- [ ] H·ªá th·ªëng ki·ªÉm tra Nutrition Log v√†o c√°c m·ªëc: 12h, 18h, 21h
- [ ] N·∫øu Protein < 70% m·ª•c ti√™u, g·ª≠i notification
- [ ] N·ªôi dung: "B·∫°n ƒëang thi·∫øu Xg Protein h√¥m nay"
- [ ] Tap v√†o notification m·ªü Dashboard ho·∫∑c AI Suggestion

**Priority:** Medium  
**Story Points:** 5

---

### US-025: Nh·∫≠n g·ª£i √Ω ƒëi·ªÅu ch·ªânh b·ªØa ƒÉn
**As a** ng∆∞·ªùi d√πng  
**I want** nh·∫≠n g·ª£i √Ω ƒëi·ªÅu ch·ªânh b·ªØa ƒÉn ti·∫øp theo  
**So that** t√¥i ƒë·∫°t ƒë∆∞·ª£c c√¢n b·∫±ng dinh d∆∞·ª°ng trong ng√†y

**Acceptance Criteria:**
- [ ] Ph√¢n t√≠ch nutrition gap (thi·∫øu/d∆∞ g√¨)
- [ ] G·ª£i √Ω m√≥n ƒÉn cho b·ªØa ti·∫øp theo
- [ ] V√≠ d·ª•: "B·ªØa t·ªëi n√™n ƒÉn th√™m rau xanh v√† c√° ƒë·ªÉ ƒë·ªß Omega-3"
- [ ] T√≠ch h·ª£p LLM ƒë·ªÉ g·ª£i √Ω th√¥ng minh h∆°n

**Priority:** Low  
**Story Points:** 8

---

### US-026: C·∫£nh b√°o d·ªã ·ª©ng khi qu√©t m√≥n
**As a** ng∆∞·ªùi d√πng c√≥ d·ªã ·ª©ng nghi√™m tr·ªçng  
**I want** nh·∫≠n c·∫£nh b√°o ngay l·∫≠p t·ª©c khi scan m√≥n c√≥ allergen  
**So that** t√¥i kh√¥ng ƒÉn nh·∫ßm

**Acceptance Criteria:**
- [ ] Sau khi scan, ki·ªÉm tra allergen ngay
- [ ] N·∫øu ph√°t hi·ªán allergen m·ª©c Severe, hi·ªÉn th·ªã popup c·∫£nh b√°o ƒë·ªè
- [ ] Kh√¥ng cho ph√©p log m√≥n cho ƒë·∫øn khi user confirm "I understand the risk"
- [ ] Ghi log c·∫£nh b√°o ƒë·ªÉ tracking

**Priority:** High  
**Story Points:** 5

---

## 7. PH√ÇN H·ªÜ AGENT SYSTEM ARCHITECTURE

### US-027: Orchestrate multi-agent workflow cho Food Scanner
**As a** system administrator  
**I want** c√°c agents trong Food Scanner group ƒë∆∞·ª£c orchestrate t·ªëi ∆∞u  
**So that** vi·ªác qu√©t m√≥n ƒÉn di·ªÖn ra nhanh ch√≥ng v√† ch√≠nh x√°c

**Acceptance Criteria:**
- [ ] Agent Orchestrator kh·ªüi ch·∫°y Image Analysis Agent khi user upload ·∫£nh
- [ ] Sau khi nh·∫≠n ƒë∆∞·ª£c ingredients, parallel trigger Safety Check Agent v√† Nutrition Calculator Agent
- [ ] Timeout mechanism: M·ªói agent t·ªëi ƒëa 5 gi√¢y
- [ ] Fallback: N·∫øu m·ªôt agent fail, v·∫´n tr·∫£ v·ªÅ partial results
- [ ] Logging: Ghi log workflow execution time v√† success rate

**Priority:** High  
**Story Points:** 8

---

### US-028: Parallel processing cho Menu Translation
**As a** system  
**I want** x·ª≠ l√Ω song song OCR, Translation, v√† Currency Conversion  
**So that** menu ƒë∆∞·ª£c x·ª≠ l√Ω nhanh h∆°n

**Acceptance Criteria:**
- [ ] OCR Agent ch·∫°y tr∆∞·ªõc, parse menu structure
- [ ] Khi OCR ho√†n th√†nh, trigger parallel:
  - Translation Agent (d·ªãch t·∫•t c·∫£ items)
  - Currency Conversion Agent (quy ƒë·ªïi gi√°)
  - Menu Safety Scanner Agent (qu√©t allergens)
- [ ] Tag Recognition Agent ch·∫°y sau khi OCR xong
- [ ] T·ªïng th·ªùi gian x·ª≠ l√Ω < 10 gi√¢y cho menu 20 m√≥n
- [ ] Progress indicator cho user (OCR 30% ‚Üí Translation 60% ‚Üí Complete 100%)

**Priority:** High  
**Story Points:** 13

---

### US-029: LLM Recommendation Agent v·ªõi context awareness
**As a** ng∆∞·ªùi d√πng  
**I want** nh·∫≠n g·ª£i √Ω m√≥n ƒÉn t·ª´ AI d·ª±a tr√™n to√†n b·ªô context c√° nh√¢n  
**So that** g·ª£i √Ω ph√π h·ª£p v√† th·ª±c t·∫ø h∆°n

**Acceptance Criteria:**
- [ ] LLM Agent nh·∫≠n input:
  - Current nutrition gap (t·ª´ Gap Analyzer Agent)
  - User preferences (t·ª´ UserProfile)
  - Allergens v√† severity (t·ª´ Allergen table)
  - Health conditions (t·ª´ HealthProfile)
  - Meal time context (s√°ng/tr∆∞a/t·ªëi)
  - Location context (n·∫øu c√≥)
- [ ] Output: 3-5 g·ª£i √Ω m√≥n ƒÉn c·ª• th·ªÉ v·ªõi reasoning
- [ ] M·ªói g·ª£i √Ω c√≥: T√™n m√≥n, l√Ω do ch·ªçn, nutrition breakdown
- [ ] Response time < 3 gi√¢y
- [ ] Caching: Cache recommendations cho 1 gi·ªù n·∫øu context kh√¥ng ƒë·ªïi

**Priority:** Medium  
**Story Points:** 13

---

### US-030: Agent retry mechanism v√† error handling
**As a** system  
**I want** agents t·ª± ƒë·ªông retry khi g·∫∑p l·ªói t·∫°m th·ªùi  
**So that** h·ªá th·ªëng resilient h∆°n v·ªõi API failures

**Acceptance Criteria:**
- [ ] M·ªói agent c√≥ exponential backoff retry (3 l·∫ßn)
- [ ] Retry delay: 1s, 2s, 4s
- [ ] Ph√¢n bi·ªát l·ªói t·∫°m th·ªùi (network timeout, rate limit) v√† l·ªói vƒ©nh vi·ªÖn (invalid input)
- [ ] Ch·ªâ retry l·ªói t·∫°m th·ªùi
- [ ] Sau 3 l·∫ßn retry fail, tr·∫£ v·ªÅ error message r√µ r√†ng cho user
- [ ] Logging: Ghi log m·ªói l·∫ßn retry

**Priority:** High  
**Story Points:** 8

---

### US-031: Agent performance monitoring
**As a** system administrator  
**I want** theo d√µi performance c·ªßa t·ª´ng agent  
**So that** t√¥i c√≥ th·ªÉ optimize bottlenecks

**Acceptance Criteria:**
- [ ] Track metrics cho m·ªói agent:
  - Average response time
  - Success rate (%)
  - Error rate (%)
  - Retry count
  - API quota usage
- [ ] Dashboard hi·ªÉn th·ªã metrics real-time
- [ ] Alert khi:
  - Agent response time > 5s
  - Error rate > 10%
  - API quota > 80%
- [ ] Metrics ƒë∆∞·ª£c l∆∞u ƒë·ªÉ ph√¢n t√≠ch trend

**Priority:** Medium  
**Story Points:** 5

---

### US-032: Agent load balancing v√† quota management
**As a** system  
**I want** ph√¢n ph·ªëi load gi·ªØa nhi·ªÅu AI service providers  
**So that** t·ªëi ∆∞u cost v√† tr√°nh rate limiting

**Acceptance Criteria:**
- [ ] Image Analysis Agent c√≥ th·ªÉ switch gi·ªØa:
  - OpenAI GPT-4 Vision (primary)
  - Google Cloud Vision (fallback)
- [ ] Translation Agent c√≥ th·ªÉ switch gi·ªØa:
  - DeepL (primary cho quality)
  - Google Translate (fallback cho cost)
- [ ] Quota tracking per provider per day
- [ ] Auto switch khi quota g·∫ßn h·∫øt (> 90%)
- [ ] Config file ƒë·ªÉ set priority v√† quota limits

**Priority:** Medium  
**Story Points:** 8

---

### US-034: Cache Management Agent cho faster response
**As a** system  
**I want** cache k·∫øt qu·∫£ c·ªßa agents th∆∞·ªùng d√πng  
**So that** gi·∫£m API calls v√† tƒÉng t·ªëc ƒë·ªô

**Acceptance Criteria:**
- [ ] Cache strategy:
  - Food scan results: Cache 7 ng√†y (key: image hash)
  - Currency rates: Cache 24 gi·ªù
  - Translation results: Cache 30 ng√†y (key: text + lang pair)
  - LLM recommendations: Cache 1 gi·ªù (key: nutrition gap + preferences)
- [ ] Cache invalidation khi user thay ƒë·ªïi profile
- [ ] Cache hit rate tracking
- [ ] Auto cleanup stale cache entries
- [ ] Redis backend cho distributed caching

**Priority:** Medium  
**Story Points:** 5

---

### US-035: Matching Score Agent algorithm
**As a** ng∆∞·ªùi d√πng  
**I want** th·∫•y m√≥n ƒÉn ƒë∆∞·ª£c rank theo ƒë·ªô ph√π h·ª£p v·ªõi m·ª•c ti√™u  
**So that** t√¥i d·ªÖ d√†ng ch·ªçn m√≥n ƒë√∫ng

**Acceptance Criteria:**
- [ ] Matching Score t√≠nh d·ª±a tr√™n:
  - Nutrition fit (40%): Calorie v√† macro ph√π h·ª£p v·ªõi gap
  - Safety score (30%): Kh√¥ng ch·ª©a allergens ho·∫∑c conflict v·ªõi health conditions
  - Preference match (20%): Kh·ªõp v·ªõi food preferences
  - Budget fit (10%): Gi√° ph√π h·ª£p v·ªõi budget input
- [ ] Score range: 0-100
- [ ] Classification:
  - 80-100: "Highly Recommended" (badge xanh)
  - 60-79: "Good Match" (badge v√†ng)
  - 40-59: "Fair" (badge x√°m)
  - < 40: Kh√¥ng hi·ªÉn th·ªã
- [ ] Hi·ªÉn th·ªã breakdown c·ªßa score khi user tap

**Priority:** High  
**Story Points:** 13

---

### US-036: Agent health check v√† auto-recovery
**As a** system administrator  
**I want** h·ªá th·ªëng t·ª± ƒë·ªông ph√°t hi·ªán v√† recover agent failures  
**So that** downtime ƒë∆∞·ª£c gi·∫£m thi·ªÉu

**Acceptance Criteria:**
- [ ] Health check endpoint cho m·ªói agent
- [ ] Check interval: 30 gi√¢y
- [ ] Khi agent fail health check:
  - Ghi log v·ªõi alert level
  - Th·ª≠ restart agent
  - N·∫øu restart fail 3 l·∫ßn, disable agent v√† d√πng fallback
  - G·ª≠i notification cho admin
- [ ] Circuit breaker pattern: T·∫°m ng∆∞ng g·ªçi agent khi error rate > 50%
- [ ] Auto recovery khi health check pass tr·ªü l·∫°i

**Priority:** Medium  
**Story Points:** 8

---

## T·ªîNG K·∫æT

**T·ªïng s·ªë User Stories:** 36  
**Ph√¢n b·ªë Priority:**
- High: 17 stories
- Medium: 16 stories  
- Low: 3 stories

**T·ªïng Story Points:** ~269 points

**Ph√¢n b·ªë theo Subsystem:**
1. Auth & Profile: 8 stories (36 points)
2. Home Summary: 3 stories (18 points)
3. AI Food Scanner: 3 stories (24 points)
4. Smart Menu Translator: 5 stories (36 points)
5. Smart Food Search: 4 stories (26 points)
6. Notifications & Suggestions: 3 stories (18 points)
7. **Agent System Architecture: 10 stories (89 points)** ‚ú®

**Agent Stories Distribution:**
- Orchestration & Workflows: 2 stories (US-027, US-028)
- AI/LLM Integration: 1 story (US-029)
- Error Handling & Reliability: 3 stories (US-030, US-031, US-036)
- Performance Optimization: 3 stories (US-032, US-033, US-034)
- Business Logic Agents: 1 story (US-035)

